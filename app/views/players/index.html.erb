<div id="player-list">
	<h2>The Players</h2>
	<%= render "list" %>
</div>
<div id="get-started">
	<h2>Create your own card</h2>
	<p>Here is where I will what I can do and why I think they should do it.  And here is some extra text to see how it's gonna wrap in a paragraph....
		<ul>
			<li>Reason 1</li>
			<li>Reason 1</li>
			<li>Reason 1</li>
		</ul>
	</p>
	<input type="button" id="start-button" value="Get Started" />
	<%= link_to 'Create', new_player_registration_path %>
</div>

<div id="dialog" title="Create your card">
	<%= render "form" %>
</div>


<script>
$(function() {
	var name = $("#player_name"),
		notes = $("#player_notes"),
		allFields = $( [ ] ).add(name).add(notes),
		tips = $(".validateTips");

	function updateTips(t) {
		tips.show();
		tips.text(t).addClass("ui-state-highlight");
	}

	function checkLength(o, n, min, max ) {
		if ( o.val().length > max || o.val().length < min) {
			o.addClass("ui-state-error");
			updateTips("Length of " + n + " must be longer than " + min + 
				" and shorter than " + max + ".");
			return false;
		} else {
			return true;
		}
	}
	
	$( "#dialog" ).dialog({
		autoOpen: false,
		modal: true,
		width: 650,
		resizable: false,
		buttons: {
			"Create": function() {
				var bValid = true;
				allFields.removeClass("ui-state-error");
				tips.hide();

				bValid = bValid && checkLength(name, "Name", 3, 75);
				bValid = bValid && checkLength(notes, "Notes", 0, 255);
				
				if ( bValid ) {
					$('#new_player').submit();
				}
			},
			Cancel: function() {
				$( this ).dialog( "close" );
			}
		},
		close: function() {
			allFields.val("").removeClass("ui-state-error");
			tips.hide();
		}
	});
	
	$("#start-button").click(function() {
		$("#dialog").dialog("open");
		return false;
	});
});



</script>